#!/bin/bash

OWNER=$OWNER
FROM=$FROM
KEYRING=${KEYRING:-os}
NODE_IP=${NODE_IP:-localhost}
CHAIN_ID=$CHAIN_ID

RUSTFLAGS='-C link-arg=-s' cargo build --target wasm32-unknown-unknown

bandd tx oracle edit-oracle-script 1 \
  --name "Penetration Testing" \
  --description "Poking around the Oracle Script until it GET REKT" \
  --script ./target/wasm32-unknown-unknown/debug/pentest.wasm \
  --owner $OWNER  \
  --from $FROM \
  --keyring-backend $KEYRING \
  --node "tcp://${NODE_IP}:26657" \
  --chain-id $CHAIN_ID \
  --schema "{scenario:u64,multiplier:u64}/{dummy:u64}" \
  --gas 1000000
